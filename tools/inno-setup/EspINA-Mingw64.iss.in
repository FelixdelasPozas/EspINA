; ESPINA Mingw64 Distribution Inno Setup File
; 
; WARNING: For internal use, not intended for public distribution of ESPINA
;
; NOTES: Assumes that the user has compiled all the library dependencies, not 
; installed precompiled libraries.
; This file has been fitted to work on the vagrant box, so some of the names of
; the directories have been fixed.

[Setup]
AppName=ESPINA
AppVersion=@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@
DefaultDirName={pf}\ESPINA
DefaultGroupName=ESPINA
OutputDir=@CMAKE_CURRENT_BINARY_DIR@
AlwaysShowComponentsList=yes
AppComments=ESPINA Interactive Neuron Analizer
AppContact=CesViMa/UPM
AppCopyright=(c)2013 CesViMA/UPM
AppPublisher=CesViMA/UPM
ArchitecturesAllowed=x64
Compression=lzma2/ultra64
UninstallDisplayIcon={app}\espina.exe
UninstallDisplayName=ESPINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@
SourceDir=@CMAKE_CURRENT_BINARY_DIR@\App
SetupIconFile=@CMAKE_CURRENT_SOURCE_DIR@\App\rsc\espina.ico
OutputBaseFilename=ESPINA Setup (Mingw64 Distribution)

[Types]
Name: "full"; Description: "Full installation"
Name: "custom"; Description: "Custom installation"; Flags: iscustom

[Components]
Name: "program"; Description: "ESPINA Program Files"; Types: full custom; Flags: fixed
Name: "plugins"; Description: "ESPINA Plugins"; Types: full custom
Name: "plugins\ASurface"; Description: "Apposition Surface Plugin"; Types: full custom
Name: "plugins\CFrame"; Description: "Counting Frame Plugin"; Types: full custom
Name: "plugins\Segmha"; Description: "SEGMHA Importer Plugin"; Types: full custom
;Name: "plugins\AutoSeg"; Description: "AutoSegmenter Plugin"; Types: full custom
Name: "dependencies"; Description: "Library Dependencies"; Types: full custom
Name: "dependencies\VTK"; Description: "VTK v6.1.0 Libraries"; Types: full custom
Name: "dependencies\ITK"; Description: "ITK v4.6.0 Libraries"; Types: full custom
Name: "dependencies\Quazip"; Description: "Quazip v0.7 Libraries"; Types: full custom
Name: "dependencies\Qt"; Description: "Qt v4.8.4 Libraries"; Types: full custom
Name: "dependencies\Boost"; Description: "Boost v1.56.0 Libraries"; Types: full custom

[Dirs]
Name: "{app}\plugins"

[Files]
Source: "ESPINA.exe"; DestDir: "{app}"; Components: program
Source: "libEspinaCore.dll"; DestDir: "{app}"; Components: program
Source: "libEspinaExtensions.dll"; DestDir: "{app}"; Components: program
Source: "libEspinaFilters.dll"; DestDir: "{app}"; Components: program
Source: "libEspinaGUI.dll"; DestDir: "{app}"; Components: program
Source: "libEspinaSupport.dll"; DestDir: "{app}"; Components: program
Source: "libEspinaUndo.dll"; DestDir: "{app}"; Components: program

; Need the compiler dlls.
Source: "c:\mingw64\bin\*.dll"; DestDir: "{app}"; Components: program

Source: "plugins\libAppositionSurfacePlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\ASurface
Source: "plugins\libCountingFramePlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\CFrame
Source: "plugins\libSegmhaImporterPlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\Segmha
;Source: "plugins\libAutoSegmentPlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\AutoSeg

Source: "@VTK_DIR@\bin\*.dll"; DestDir: "{app}"; Components: dependencies\VTK

Source: "@ITK_DIR@\bin\*.dll"; DestDir: "{app}"; Components: dependencies\ITK

Source: "@QT_BINARY_DIR@\Qt*.dll"; DestDir: "{app}"; Components: dependencies\Qt
Source: "@QT_PLUGINS_DIR@\iconengines\*.dll"; DestDir: "{app}"; Components: dependencies\Qt
Source: "@QT_PLUGINS_DIR@\imageformats\*.dll"; DestDir: "{app}"; Components: dependencies\Qt

Source: "@QUAZIP_LIBRARY_DIR@\libquazip.dll"; DestDir: "{app}"; Components: dependencies\Quazip

Source: "c:\deplibs\boost_1_57_0\stage\lib\libboost_*-mt-1_56.dll"; DestDir: "{app}"; Components: dependencies\Boost

[Icons]
Name: "{group}\ESPINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@"; Filename: "{app}\ESPINA.exe"; WorkingDir: "{app}"
Name: "{commondesktop}\ESPINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@"; Filename: "{app}\ESPINA.exe"; WorkingDir: "{app}"
