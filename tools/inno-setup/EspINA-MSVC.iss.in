; EspINA Microsoft Visual Studio Distribution Inno Setup File
; 
; WARNING: For internal use, not intended for public distribution of EspINA
;
; NOTES: Assumes that the user has compiled all the library dependencies, not 
; installed precompiled libraries.

[Setup]
AppName=EspINA
AppVersion=@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@
DefaultDirName={pf}\EspINA
DefaultGroupName=EspINA
OutputDir=@CMAKE_CURRENT_BINARY_DIR@
AlwaysShowComponentsList=yes
AppComments=EspINA Interactive Neuron Analizer
AppContact=CesViMa/UPM
AppCopyright=(c)2013 CesViMA/UPM
AppPublisher=CesViMA/UPM
ArchitecturesAllowed=x64
Compression=lzma2/ultra64
UninstallDisplayIcon={app}\espina.exe
UninstallDisplayName=EspINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@
SourceDir=@CMAKE_CURRENT_BINARY_DIR@\App
SetupIconFile=@CMAKE_CURRENT_SOURCE_DIR@\App\rsc\espina.ico
OutputBaseFilename=EspINA Setup (MSVC Distribution)

[Types]
Name: "full"; Description: "Full installation"
Name: "custom"; Description: "Custom installation"; Flags: iscustom

[Components]
Name: "program"; Description: "EspINA Program Files"; Types: full custom; Flags: fixed
Name: "plugins"; Description: "EspINA Plugins"; Types: full custom
Name: "plugins\ASurface"; Description: "Apposition Surface Plugin"; Types: full custom
Name: "plugins\CFrame"; Description: "Counting Frame Plugin"; Types: full custom
Name: "plugins\Segmha"; Description: "SEGMHA Importer Plugin"; Types: full custom
Name: "dependencies"; Description: "Library Dependencies"; Types: full custom
Name: "dependencies\VTK"; Description: "VTK v5.10.1 Libraries"; Types: full custom
Name: "dependencies\ITK"; Description: "ITK v4.4.0 Libraries"; Types: full custom
Name: "dependencies\Quazip"; Description: "Quazip v0.5.1 Libraries"; Types: full custom
Name: "dependencies\Qt"; Description: "Qt v4.8.4 Libraries"; Types: full custom
Name: "dependencies\Boost"; Description: "Boost v1.54 Libraries"; Types: full custom

[Dirs]
Name: "{app}\plugins"

[Files]
Source: "Release\espina.exe"; DestDir: "{app}"; Components: program
Source: "Release\EspinaCore.dll"; DestDir: "{app}"; Components: program
Source: "Release\EspinaGUI.dll"; DestDir: "{app}"; Components: program
Source: "Release\EspinaUndo.dll"; DestDir: "{app}"; Components: program

Source: "plugins\Release\AppositionSurfacePlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\ASurface
Source: "plugins\Release\CountingFramePlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\CFrame
Source: "plugins\Release\SegmhaImporterPlugin.dll"; DestDir: "{app}\plugins"; Components: plugins\Segmha

Source: "@VTK_DIR@\bin\Release\*.dll"; DestDir: "{app}"; Components: dependencies\VTK

Source: "@ITK_DIR@\bin\Release\ITKCommon-4.4.dll"; DestDir: "{app}"; Components: dependencies\ITK

Source: "@QT_BINARY_DIR@\Qt*.dll"; DestDir: "{app}"; Components: dependencies\Qt
Source: "@QT_PLUGINS_DIR@\iconengines\*.dll"; DestDir: "{app}"; Components: dependencies\Qt
Source: "@QT_PLUGINS_DIR@\imageformats\*.dll"; DestDir: "{app}"; Components: dependencies\Qt

Source: "@QUAZIP_LIBRARY_DIR@\Release\quazip.dll"; DestDir: "{app}"; Components: dependencies\Quazip

Source: "@Boost_INCLUDE_DIR@\lib64-msvc-11.0\boost_regex-vc110-mt-1_54.dll"; DestDir: "{app}"; Components: dependencies\Boost
Source: "@Boost_INCLUDE_DIR@\lib64-msvc-11.0\boost_graph-vc110-mt-1_54.dll"; DestDir: "{app}"; Components: dependencies\Boost

[Icons]
Name: "{group}\EspINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@"; Filename: "{app}\espina.exe"; WorkingDir: "{app}"
Name: "{commondesktop}\EspINA v@ESPINA_VERSION_MAJOR@.@ESPINA_VERSION_MINOR@.@ESPINA_VERSION_PATCH@"; Filename: "{app}\espina.exe"; WorkingDir: "{app}"
